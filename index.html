<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Stress inversion</title>
    <script src='libs/stress.js'></script>
    <script src="https://kit.fontawesome.com/daa834e337.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/lil-gui@0.17"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="bottom-1 start-1" style='position: absolute; opacity: 70%; left: 20px; bottom: 20px;'>
        <a href="https://www.youwol.com/" target="_blank">
            <img src="youwol.png" style="width: 100px;">
        </a>
    </div>
    <div class="bottom-1 start-1" style='position: absolute; opacity: 70%; right: 20px; bottom: 20px;'>
        <a href="http://www.gm.univ-montp2.fr/" target="_blank">
            <img src="geosciences.png" alt="geosciences" style="width: 100px;">
        </a>
    </div>

    <div class="top-1 start-1" style='position: absolute; opacity: 75%; left: 10px; top: 50px'>
        <div id="result" class="card" style="width: 200px; height: 200px; background-color: rgb(193, 193, 193);">
        </div>
    </div>

    <div class="top-1 start-1" style='position: absolute; opacity: 75%; left: 10px; top: 260px'>
        <div id="result1" class="card" style="width: 200px; height: 200px; background-color: rgb(193, 193, 193);">
        </div>
    </div>

    <div id="menu" style="position: absolute; opacity: 100%; margin-bottom:3px; top: 5px; left: 5px;"></div>
    <input id="upload" type="file" style="visibility:hidden" />

    <script>
        class Interface {
            constructor(htmlElt) {
                const GUI = lil.GUI
                const parent = document.getElementById(htmlElt)
                this.gui = new GUI({ container: parent })
                this.gui.close()
            }
            loadData() {
                document.getElementById('upload').click()
            }
            clearData() {
                console.log('clearing the data')
            }
            run() {
                console.log('running the code')
            }
        }

        let stressLib = globalThis['@alfredo-taboada/stress']

        const upload = document.getElementById('upload')
        upload.onchange = () => {
            for (const file of upload.files) {
                file.arrayBuffer().then(arrayBuffer => {
                    //console.log()
                    const buffer = (new TextDecoder()).decode(arrayBuffer).split('\n')
                    //stressLib.decodeCSV_Angles(buffer, csv.params).forEach(data => inv.addData(data))
                })
            }
        }

        const interface = new Interface('menu')

        const data = interface.gui.addFolder('Data')
        data
        data.add(interface, 'loadData').name('Load')   // Button
        data.add(interface, 'clearData').name('Clear') // Button

        const run = interface.gui.addFolder('Simulation')
        run.add(interface, 'run').name('run')

    </script>
</body>

</html>